name: Lark Notify

on:
  issues:
    types: [opened, edited, reopened]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Notification
        uses: northwang-lucky/chatbot-webhook-client@v1.1.1
        with:
          app: Lark
          webhook: ${{ secrets.LARK_WEBHOOK }}
          template: >-
            {
              "msg_type": "interactive",
              "card": {
                "schema": "2.0",
                "header": {
                  "title": {
                    "tag": "plain_text",
                    "content": "ğŸ”” Issue Update"
                  },
                  "template": "blue"
                },
                "body": {
                  "direction": "vertical",
                  "elements": [
                    {
                      "tag": "markdown",
                      "content": "<b>æ ‡é¢˜ï¼š</b>${{ github.event.issue.title }}\n<b>æ“ä½œï¼š</b>${{ github.event.action }}\n<b>ç”¨æˆ·ï¼š</b>${{ github.event.issue.user.login }}\n<b>å†…å®¹ï¼š</b>${{ github.event.issue.body }}"
                    },
                    {
                      "tag": "button",
                      "text": {
                        "tag": "plain_text",
                        "content": "ğŸ‘‰ æŸ¥çœ‹è¯¦æƒ…"
                      },
                      "type": "primary",
                      "behaviors": [
                        {
                          "type": "open_url",
                          "default_url": "${{ github.event.issue.html_url }}"
                        }
                      ]
                    }
                  ]
                }
              }
            }
          github-token: ${{ secrets.GITHUB_TOKEN }}
