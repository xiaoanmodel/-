name: Issues Lark Notify

on:
  issues:
    types: [opened, edited, reopened, closed, deleted]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Notification
        uses: northwang-lucky/chatbot-webhook-client@v1.1.1
        with:
          app: Lark
          webhook: ${{ secrets.LARK_WEBHOOK }}
          template: >-
            {
              "msg_type": "interactive",
              "card": {
                "schema": "2.0",
                "header": {
                  "title": {
                    "tag": "plain_text",
                    "content": "üîî Issue Update"
                  },
                  "template": "blue"
                },
                "body": {
                  "direction": "vertical",
                  "elements": [
                    {
                      "tag": "div",
                      "text": {
                        "tag": "lark_md",
                        "content": "**‰ªìÂ∫ìÔºö**"
                      }
                    },
                    {
                      "tag": "div",
                      "text": {
                        "tag": "lark_md",
                        "content": ${{ toJSON(github.event.repository.full_name) }}
                      }
                    },
                    {
                      "tag": "div",
                      "text": {
                        "tag": "lark_md",
                        "content": "**Ê†áÈ¢òÔºö**"
                      }
                    },
                    {
                      "tag": "div",
                      "text": {
                        "tag": "lark_md",
                        "content": ${{ toJSON(github.event.issue.title) }}
                      }
                    },
                    {
                      "tag": "div",
                      "text": {
                        "tag": "lark_md",
                        "content": "**Áä∂ÊÄÅÔºö**"
                      }
                    },
                    {
                      "tag": "div",
                      "text": {
                        "tag": "lark_md",
                        "content": ${{ toJSON(github.event.issue.state) }}
                      }
                    },
                    {
                      "tag": "div",
                      "text": {
                        "tag": "lark_md",
                        "content": "**Êìç‰ΩúÔºö**"
                      }
                    },
                    {
                      "tag": "div",
                      "text": {
                        "tag": "lark_md",
                        "content": ${{ toJSON(github.event.action) }}
                      }
                    },
                    {
                      "tag": "div",
                      "text": {
                        "tag": "lark_md",
                        "content": "**Áî®Êà∑Ôºö**"
                      }
                    },
                    {
                      "tag": "div",
                      "text": {
                        "tag": "lark_md",
                        "content": ${{ toJSON(github.event.issue.user.login) }}
                      }
                    },
                    {
                      "tag": "div",
                      "text": {
                        "tag": "lark_md",
                        "content": "**Ëß¶ÂèëËÄÖÔºö**"
                      }
                    },
                    {
                      "tag": "div",
                      "text": {
                        "tag": "lark_md",
                        "content": ${{ toJSON(github.actor) }}
                      }
                    },
                    {
                      "tag": "div",
                      "text": {
                        "tag": "lark_md",
                        "content": "**Êó∂Èó¥Ôºö**"
                      }
                    },
                    {
                      "tag": "div",
                      "text": {
                        "tag": "lark_md",
                        "content": ${{ toJSON(github.event.issue.updated_at) }}
                      }
                    },
                    {
                      "tag": "div",
                      "text": {
                        "tag": "lark_md",
                        "content": "**ÂÜÖÂÆπÔºö**"
                      }
                    },
                    {
                      "tag": "div",
                      "text": {
                        "tag": "lark_md",
                        "content": ${{ toJSON(github.event.issue.body) }}
                      }
                    },  
                    {
                      "tag": "div",
                      "text": {
                        "tag": "lark_md",
                        "content": ${{ toJSON(github.event.issue.body) }}
                      }
                    },
                    {
                      "tag": "button",
                      "text": {
                        "tag": "plain_text",
                        "content": "üëâ Êü•ÁúãËØ¶ÊÉÖ"
                      },
                      "type": "primary",
                      "behaviors": [
                        {
                          "type": "open_url",
                          "default_url": "${{ github.event.issue.html_url }}"
                        }
                      ]
                    }
                  ]
                }
              }
            }
          github-token: ${{ secrets.GITHUB_TOKEN }}
